"use strict";exports.__esModule=!0,exports.makeEnvFormat=makeEnvFormat,exports.pathToBaseRootEnv=exports.matchEnv=void 0,exports.readENV=readENV,exports.xEnvConfig=xEnvConfig;var _readEnvFile=require("read-env-file"),_path=_interopRequireDefault(require("path")),_data=require("./data");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function xEnvConfig(argv){var args=function argEnvs(_args){return _args.reduce(function(n,val){var mch=val.match(/^xenv_config_(path)=(.+)$/);return mch&&(n[mch[1]]=mch[2]),n},{})}(argv);if(args.path){var pth=_path["default"].isAbsolute(args.path)?args.path:_path["default"].resolve(process.cwd(),args.path);args.path=pth}return Object.assign({},args,{})}var matchEnv=function matchEnv(NODE_ENV){return NODE_ENV?Object.entries(_data.ENV_NAME_CONVENTIONS).reduce(function(n,_ref){var k=_ref[0],val=_ref[1];if(!n){val.filter(function(x){return x===NODE_ENV}).length&&(n=k)}return n},""):void 0};exports.matchEnv=matchEnv;var pathToBaseRootEnv=function pathToBaseRootEnv(pth){return void 0===pth&&(pth=""),pth=pth||_path["default"].resolve(process.cwd(),".env"),_path["default"].isAbsolute(pth)?pth:_path["default"].resolve(process.cwd(),pth)};exports.pathToBaseRootEnv=pathToBaseRootEnv;function readENV(envRootFilePath,debug){void 0===debug&&(debug=!1),envRootFilePath=pathToBaseRootEnv(envRootFilePath);try{return _readEnvFile.readSingle.sync(envRootFilePath)}catch(err){debug&&console.error(err.toString())}}function makeEnvFormat(parsed,msg){if(parsed&&parsed){var prepend=msg,envData=Object.entries(parsed||{}).reduce(function(n,_ref2){var k=_ref2[0],val=_ref2[1];return void 0!==parsed[k]&&(n=n?n+(k+"="+val.toString()+"\n"):k+"="+val.toString()+"\n"),n},"");return envData?envData?prepend?"# "+prepend+"\n"+envData:envData:envData:void 0}}